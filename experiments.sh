#!/bin/bash

cases=(
    'POC 25% ic:0.25 sel:deev expl:0.25'
    'POC 50% ic:0.25 sel:deev expl:0.50'
    'AVG 25% ic:0.25 sel:deev expl:0.25'
    'AVG 50% ic:0.25 sel:deev expl:0.50'
    'DEEV ic:0.25 sel:default expl:0.50'
    'FedCIA ic:0.25 sel:deev expl:0.0'
    'FedCIA ic:0.25 sel:deev expl:0.33'
    'FedCIA ic:0.25 sel:deev expl:0.66'
    'FedCIA ic:0.25 sel:deev expl:1.0'
    'FedCIA ic:0.25 sel:random expl:0.0'
    'FedCIA ic:0.25 sel:random expl:0.33'
    'FedCIA ic:0.25 sel:random expl:0.66'
    'FedCIA ic:0.25 sel:random expl:1.0'
    'FedCIA ic:0.25 sel:r_robin expl:0.0'
    'FedCIA ic:0.25 sel:r_robin expl:0.33'
    'FedCIA ic:0.25 sel:r_robin expl:0.66'
    'FedCIA ic:0.25 sel:r_robin expl:1.0'
    'POC 25% ic:0.50 sel:deev expl:0.25'
    'POC 50% ic:0.50 sel:deev expl:0.50'
    'AVG 25% ic:0.50 sel:deev expl:0.25'
    'AVG 50% ic:0.50 sel:deev expl:0.50'
    'DEEV ic:0.50 sel:default expl:0.50'
    'FedCIA ic:0.50 sel:deev expl:0.0'
    'FedCIA ic:0.50 sel:deev expl:0.33'
    'FedCIA ic:0.50 sel:deev expl:0.66'
    'FedCIA ic:0.50 sel:deev expl:1.0'
    'FedCIA ic:0.50 sel:random expl:0.0'
    'FedCIA ic:0.50 sel:random expl:0.33'
    'FedCIA ic:0.50 sel:random expl:0.66'
    'FedCIA ic:0.50 sel:random expl:1.0'
    'FedCIA ic:0.50 sel:r_robin expl:0.0'
    'FedCIA ic:0.50 sel:r_robin expl:0.33'
    'FedCIA ic:0.50 sel:r_robin expl:0.66'
    'FedCIA ic:0.50 sel:r_robin expl:1.0'
    'POC 25% ic:0.75 sel:deev expl:0.25'
    'POC 50% ic:0.75 sel:deev expl:0.50'
    'AVG 25% ic:0.75 sel:deev expl:0.25'
    'AVG 50% ic:0.75 sel:deev expl:0.50'
    'DEEV ic:0.75 sel:default expl:0.50'
    'FedCIA ic:0.75 sel:deev expl:0.0'
    'FedCIA ic:0.75 sel:deev expl:0.33'
    'FedCIA ic:0.75 sel:deev expl:0.66'
    'FedCIA ic:0.75 sel:deev expl:1.0'
    'FedCIA ic:0.75 sel:random expl:0.0'
    'FedCIA ic:0.75 sel:random expl:0.33'
    'FedCIA ic:0.75 sel:random expl:0.66'
    'FedCIA ic:0.75 sel:random expl:1.0'
    'FedCIA ic:0.75 sel:r_robin expl:0.0'
    'FedCIA ic:0.75 sel:r_robin expl:0.33'
    'FedCIA ic:0.75 sel:r_robin expl:0.66'
    'FedCIA ic:0.75 sel:r_robin expl:1.0'
)

file_docker_compose=(
    'dockercompose-poc-mnist-0.25-default-c100-r200-le1-p0.00-exp0.25-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-poc-mnist-0.25-default-c100-r200-le1-p0.00-exp0.50-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-avg-mnist-0.25-default-c100-r200-le1-p0.00-exp0.25-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-avg-mnist-0.25-default-c100-r200-le1-p0.00-exp0.50-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-avg-mnist-0.25-default-c100-r200-le1-p0.00-exp0.50-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.25-default-c100-r200-le1-p0.00-exp0.00-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.25-default-c100-r200-le1-p0.00-exp0.33-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.25-default-c100-r200-le1-p0.00-exp0.66-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.25-default-c100-r200-le1-p0.00-exp1.00-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.25-default_1-c100-r200-le1-p0.00-exp0.00-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.25-default_1-c100-r200-le1-p0.00-exp0.33-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.25-default_1-c100-r200-le1-p0.00-exp0.66-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.25-default_1-c100-r200-le1-p0.00-exp1.00-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.25-r_robin-c100-r200-le1-p0.00-exp0.00-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.25-r_robin-c100-r200-le1-p0.00-exp0.33-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.25-r_robin-c100-r200-le1-p0.00-exp0.66-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.25-r_robin-c100-r200-le1-p0.00-exp1.00-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-poc-mnist-0.5-default-c100-r200-le1-p0.00-exp0.25-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-poc-mnist-0.5-default-c100-r200-le1-p0.00-exp0.50-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-avg-mnist-0.5-default-c100-r200-le1-p0.00-exp0.25-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-avg-mnist-0.5-default-c100-r200-le1-p0.00-exp0.50-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-avg-mnist-0.5-default-c100-r200-le1-p0.00-exp0.50-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.5-default-c100-r200-le1-p0.00-exp0.00-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.5-default-c100-r200-le1-p0.00-exp0.33-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.5-default-c100-r200-le1-p0.00-exp0.66-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.5-default-c100-r200-le1-p0.00-exp1.00-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.5-default_1-c100-r200-le1-p0.00-exp0.00-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.5-default_1-c100-r200-le1-p0.00-exp0.33-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.5-default_1-c100-r200-le1-p0.00-exp0.66-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.5-default_1-c100-r200-le1-p0.00-exp1.00-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.5-r_robin-c100-r200-le1-p0.00-exp0.00-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.5-r_robin-c100-r200-le1-p0.00-exp0.33-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.5-r_robin-c100-r200-le1-p0.00-exp0.66-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.5-r_robin-c100-r200-le1-p0.00-exp1.00-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-poc-mnist-0.75-default-c100-r200-le1-p0.00-exp0.25-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-poc-mnist-0.75-default-c100-r200-le1-p0.00-exp0.50-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-avg-mnist-0.75-default-c100-r200-le1-p0.00-exp0.25-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-avg-mnist-0.75-default-c100-r200-le1-p0.00-exp0.50-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-avg-mnist-0.75-default-c100-r200-le1-p0.00-exp0.50-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.75-default-c100-r200-le1-p0.00-exp0.00-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.75-default-c100-r200-le1-p0.00-exp0.33-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.75-default-c100-r200-le1-p0.00-exp0.66-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.75-default-c100-r200-le1-p0.00-exp1.00-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.75-default_1-c100-r200-le1-p0.00-exp0.00-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.75-default_1-c100-r200-le1-p0.00-exp0.33-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.75-default_1-c100-r200-le1-p0.00-exp0.66-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.75-default_1-c100-r200-le1-p0.00-exp1.00-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.75-r_robin-c100-r200-le1-p0.00-exp0.00-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.75-r_robin-c100-r200-le1-p0.00-exp0.33-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.75-r_robin-c100-r200-le1-p0.00-exp0.66-lsf0.00-dec0.01-thr1.0.yaml'
    'dockercompose-cia-mnist-0.75-r_robin-c100-r200-le1-p0.00-exp1.00-lsf0.00-dec0.01-thr1.0.yaml'
)
# for i in {0..36};
for i in {0..51};
do
    python3 environment.py -e "${cases[$i]}"
    docker compose -f "${file_docker_compose[$i]}" --profile server up &
    sleep 1
    docker compose -f "${file_docker_compose[$i]}" --profile client up
    # ./clear-dockers.sh
done